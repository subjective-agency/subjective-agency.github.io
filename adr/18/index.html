<!DOCTYPE html>
<html>

<head>
    <title>ðŸ—¸ ADR-18. JavaScript Coding Standards - Wapaganda Project Docs</title>
    <style>
      /* load heading font */
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400');
      @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@400');
      @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700');
      @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@700');

      /* load body font */
      @import url('https://fonts.googleapis.com/css2?family=Noto Sans:wght@400');
      @import url('https://fonts.googleapis.com/css2?family=Noto Sans:ital,wght@400');
      @import url('https://fonts.googleapis.com/css2?family=Noto Sans:wght@700');
      @import url('https://fonts.googleapis.com/css2?family=Noto Sans:ital,wght@700');

      /* load mono font */
      @import url('https://fonts.googleapis.com/css2?family=JetBrains Mono:wght@400');
      @import url('https://fonts.googleapis.com/css2?family=JetBrains Mono:ital,wght@400');
      @import url('https://fonts.googleapis.com/css2?family=JetBrains Mono:wght@700');
      @import url('https://fonts.googleapis.com/css2?family=JetBrains Mono:ital,wght@700');

      /* load emoji font */
      @font-face {
        font-family: "Noto Color Emoji";
        src: url('../../assets/fonts/emoji/NotoColorEmoji-Regular.ttf');
        font-weight: 400;
      }
  
      :root {
        /* colors */
        --primary: #05b2dc;
        --secondary: #ef9B0f;
        --tertiary: #ef3e36;
        /* shades */
        --base: #ffffff;
        --mantle: #f5f4f5;
        --crust: #d4d2d5;
        --overlay: #aBaBaE;
        --footer: #000000cc;
        /* text */
        --text: #343233;
        --hltext: #ffffff;
        color: var(--text);
        /* background-specific text */
        --primary-text: var(--hltext);
        --secondary-text: var(--hltext);
        --tertiary-text: var(--hltext);
        --base-text: var(--text);
        --mantle-text: var(--text);
        --crust-text: var(--text);
        --overlay-text: var(--hltext);
        --footer-text: var(--hltext);
        /* fonts */
        --heading: Poppins, Noto Color Emoji;
        --body: Noto Sans, Noto Color Emoji;
        --mono: JetBrains Mono, Noto Color Emoji;
        font-family: var(--body); 
      }
      /* dark mode */
      @media (prefers-color-scheme: dark) {
        :root {
          /* colors */
          --primary: #05b2dc;
          --secondary: #ef9B0f;
          --tertiary: #ef3e36;
          /* shades */
          --base: #343233;
          --mantle: #373536;
          --crust: #3E3C3D;
          --overlay: #646461;
          --footer: #00000022;
          /* text */
          --text: #ffffff;
          --hltext: #343233;
          color: var(--text);
          /* background-specific text */
          --primary-text: var(--text);
          --secondary-text: var(--text);
          --tertiary-text: var(--text);
          --base-text: var(--text);
          --mantle-text: var(--text);
          --crust-text: var(--text);
          --overlay-text: var(--hltext);
          --footer-text: var(--text);
        }
      }
      /* style settings */
      header#header {
        grid-template-columns: 8rem auto 8rem;
      }
      body#background {
        background: fixed center/cover var(--base);
        
        
      }
      #background-gradient {
        background: linear-gradient(
          45deg, 
          color-mix(in srgb, var(--mantle) 80%, transparent), transparent, color-mix(in srgb, var(--crust) 20%, transparent)
        );
      }
      content#content {
        padding: 0 3rem;
        background: color-mix(in srgb, var(--base) 0%, transparent);
        border-left: none;
        border-right: none;
      }
      #avatar {
        
        border-radius: 1rem;
        
      }
      footer#footer a {
        color: #ef9B0f;
      }
      footer#footer a:hover {
        color: #ef3e36;
      }
    </style>
    <link rel="icon" type="image/x-icon" href=assets/landing-favicon.png>
    <link href="../../css/style.css" rel="stylesheet">
    <link href="../../css/responsivity.css" rel="stylesheet">  
    <script src="../../search/main.js"></script>
    <script src="https://kit.fontawesome.com/b57355f8ac.js" crossorigin="anonymous"></script>
    <script id="altmetric-embed-js" src="https://d1bxh8uas1mnw7.cloudfront.net/assets/altmetric_badges-e7ba41a192efc3e63f5d48f8a1916dec4b1b49c01075bc7b39481408957b3b28.js"></script>
    <link id="altmetric-embed-css" rel="stylesheet" type="text/css" href="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed-59614f5c46b49b21eeef3bb28c4fb38d1e7069e8d014752fcb66e84942556802.css">
  </head>

<body id="background">
  <div id="background-gradient"></div>
  <content id="content">
  
  <header id="article-header">
    <a href=../.. id="return-home">
        <i class="fa fa-arrow-left" alt="â‡¦"></i> Home
    </a>
    <h1 id="title">ðŸ—¸ ADR-18. JavaScript Coding Standards</h1>
</header>
  
  <main id="page">
    <nav class="vertical" id="toc">

<ul>

<li class="nav-item">
<a href="#context">Context</a>
    
    <ul>
    
    </ul>
    
</li>

<li class="nav-item">
<a href="#decision">Decision</a>
    
    <ul>
    
    
    <li class="nav-subitem">
    <a href="#files">Files</a>
    </li>
    
    
    
    <li class="nav-subitem">
    <a href="#file-content_1">File content</a>
    </li>
    
    
    
    <li class="nav-subitem">
    <a href="#jsdoc">JSDoc</a>
    </li>
    
    
    </ul>
    
</li>

<li class="nav-item">
<a href="#status">Status</a>
    
    <ul>
    
    </ul>
    
</li>

<li class="nav-item">
<a href="#consequences">Consequences</a>
    
    <ul>
    
    </ul>
    
</li>

</ul>

</nav>
    <h1 id="context">Context</h1>
<p>This set of rules is a meaningful subset of Google's and Mozilla's coding standards.<span style="color:darkorange;"></span></p>
<h1 id="decision">Decision</h1>
<p>In order to keep codebase clean and organized, the following rules are suggested as a general guideline.</p>
<h2 id="files"><strong>Files</strong></h2>
<h3 id="file-structure"><strong>File structure</strong></h3>
<ul>
<li>UseÂ <code>src</code>Â folder for source files;</li>
<li>UseÂ <code>test</code>Â folder for test files;</li>
<li>UseÂ <code>src/js</code>Â folder for JS files;</li>
<li>UseÂ <code>src/css</code>Â folder for CSS files.</li>
</ul>
<h3 id="file-content"><strong>File content</strong></h3>
<ul>
<li>Use UTF-8 encoding for all files.</li>
</ul>
<h3 id="import"><strong>Import</strong></h3>
<ul>
<li>Use following order for import statements:</li>
<li>import statements for React components;</li>
<li>import statements for libraries;</li>
<li>import statements for project files;</li>
<li>Exactly <strong>1 (one)</strong> blank line must separate existing sections;</li>
<li>Import statements must not be line-wrapped;</li>
<li>The <code>.js</code> file extension is <span style="color:red;"> </span><span style="color:red;"><strong>not</strong></span><span style="color:red;"> </span> optional in import paths and must always be included:</li>
</ul>
<p>```javascript
  // Wrong!
  import '../directory/file';</p>
<p>// Right
  import '../directory/file.js';
  ```
* Technically, ECMAScript specification allows import cycles between ES modules, but <span style="color:red;"> </span><span style="color:red;"><strong>don't do it</strong></span><span style="color:red;"> </span>.</p>
<h3 id="export"><strong>Export</strong></h3>
<ul>
<li>Use <strong>named exports</strong> everywhere. The <code>export</code> keyword can be applied to a declaration, or used in theÂ <code>export {name};</code>Â syntax:</li>
</ul>
<p>```javascript
  // Wrong!
  export default function () {
    // ...
  }
  import name from './file.js';</p>
<p>// Right
  export function name() {
    // ...
  }
  import {name} from './file.js';
  ```
* Exported variables must not be mutated outside of module initialization.</p>
<p>```javascript
  // Wrong!
  import {name} from './file.js';
  name = 'new name';</p>
<p>```
* Do not use default exports. <span style="color:red;">Importing modules must give a name to these values, which can lead to inconsistencies in naming across modules.</span></p>
<p>```javascript
  // Wrong!
  export default function () {
    // ...
  }</p>
<p>```</p>
<h2 id="file-content_1"><strong>File content</strong></h2>
<h3 id="naming"><strong>Naming</strong></h3>
<ul>
<li>UseÂ <code>FileName.js</code>Â notation for JS files,Â <code>file-name.css</code>Â andÂ <code>file-name.html</code>Â for CSS and HTML files</li>
<li>UseÂ <code>variableName</code>Â notation for JS variables and functions</li>
<li>UseÂ <code>ClassName</code>Â notation for JS classes</li>
<li>UseÂ <code>CONSTANT_NAME</code>Â notation for JS constants</li>
</ul>
<p>Give as descriptive a name as possible,Â within reason.Â Do not worry about saving horizontal space, as it is far more important to make your code immediately understandable by a new reader.Â Do not use abbreviations that are ambiguous or unfamiliar to readers outside your project,Â and do not abbreviate by deleting letters within a word.</p>
<pre><code class="language-javascript">// Incorrect
n                   // Meaningless.
nErr                // Ambiguous abbreviation.
nCompConns          // Ambiguous abbreviation.
wgcConnections      // Only your group knows what this stands for.
pcReader            // Lots of things can be abbreviated &quot;pc&quot;.
cstmrId             // Deletes internal letters.
kSecondsPerDay      // Do not use Hungarian notation.

// Correct
errorCount          // No abbreviation.
dnsConnectionIndex  // Most people know what &quot;DNS&quot; stands for.
referrerUrl         // Ditto for &quot;URL&quot;.
customerId          // &quot;Id&quot; is both ubiquitous and unlikely to be misunderstood.
</code></pre>
<h3 id="formatting"><strong>Formatting</strong></h3>
<ul>
<li>Use clang-format. The JavaScript community has invested effort to make sureÂ <code>clang-format</code>Â "does the right thing" on JavaScript files.Â <code>clang-format</code>Â has integration with several popular editors.</li>
<li>Braces are required for all control structures (i.e.Â <code>if</code>,Â <code>else</code>,Â <code>for</code>,Â <code>do</code>,Â <code>while</code>, as well as any others), even if the body contains only a single statement. The first statement of a non-empty block must begin on its own line.</li>
</ul>
<pre><code class="language-javascript">// Incorrect
if (test)
  return false;

// Incorrect
if (test) return false;

// Correct
if (test) {
  return false;
}
</code></pre>
<ul>
<li>One statement per line</li>
<li>Each statement is followed by a line-break</li>
<li>Semicolons are required</li>
<li>Horizontal alignment: discouraged. Consider a future change that needs to touch just one line. This change may leave the formerly-pleasing formatting mangled, and that is allowed. More often, it prompts the coder (perhaps you) to adjust whitespace on nearby lines as well, possibly triggering a cascading series of re-formattings.</li>
</ul>
<pre><code>// Incorrect
const a     = 1;
const bb    = 2;
const ccc   = 3;

// Correct
const a = 1;
const bb = 2;
const ccc = 3;
</code></pre>
<h3 id="variables"><strong>Variables</strong></h3>
<ul>
<li>UseÂ <code>const</code>Â for all of your references by default</li>
<li>UseÂ <code>let</code>Â if needed</li>
<li>Don't useÂ <code>var</code></li>
<li>One variable per declaration</li>
</ul>
<pre><code>// Incorrect
const items = getItems(), goSportsTeam = true, dragonball = 'z';

// Correct
const items = getItems();
const goSportsTeam = true;
const dragonball = 'z';
</code></pre>
<ul>
<li>Declared when needed, initialized as soon as possible</li>
<li>Local variables are not habitually declared at the start of their containing block or block-like construct. Instead, local variables are declared close to the point they are first used (within reason), to minimize their scope.</li>
</ul>
<h3 id="arrays"><strong>Arrays</strong></h3>
<ul>
<li>Do not use the variadic Array constructor. The constructor is error-prone if arguments are added or removed. Use a literal instead.</li>
</ul>
<pre><code>// Incorrect
const a1 = new Array(x1, x2, x3);
const a2 = new Array(x1, x2);
const a3 = new Array(x1);
const a4 = new Array();

// This works as expected except for the third case: if x1 is a whole number 
// then a3 is an array of size x1 where all elements are undefined. 
// If x1 is any other number, then an exception will be thrown, 
// and if it is anything else then it will be a single-element array.

// Correct
const a1 = [x1, x2, x3];
const a2 = [x1, x2];
const a3 = [x1];
const a4 = [];
</code></pre>
<ul>
<li>Explicitly allocating an array of a given length using new Array(length) is allowed when appropriate.</li>
</ul>
<pre><code>const a1 = new Array(foo.length);
</code></pre>
<h3 id="objects"><strong>Objects</strong></h3>
<ul>
<li>Do not mix quoted and unquoted keys</li>
<li>Object literals may represent either structs (with unquoted keys and/or symbols) or dictionaries (with quoted and/or computed keys). Do not mix these key types in a single object literal.</li>
</ul>
<pre><code class="language-javascript">// Incorrect
{
  width: 42, // struct-style unquoted key
  'maxWidth': 43, // dict-style quoted key
}

// Correct
{
  width: 42, // struct-style unquoted key
  maxWidth: 43, // struct-style unquoted key
}
</code></pre>
<ul>
<li>Enumerations are defined by adding the @enum annotation to an object literal. Additional properties may not be added to an enum after it is defined. Enums must be constant, and all enum values must be deeply immutable.</li>
</ul>
<pre><code class="language-javascript">/**
 * Supported temperature scales.
 * @enum {string}
 */
const TemperatureScale = {
  CELSIUS: 'celsius',
  FAHRENHEIT: 'fahrenheit',
};
</code></pre>
<h3 id="strings"><strong>Strings</strong></h3>
<ul>
<li>Use single quotes for strings</li>
<li>Use template strings instead of concatenation</li>
</ul>
<pre><code>// Incorrect
const name = 'Bob Parr';
const time = 12;
const greeting = 'Good afternoon, ' + name + ', it is ' + time + ' now.';

// Correct
const name = 'Bob Parr';
const time = 12;
const greeting = `Good afternoon, ${name}, it is ${time} now.`;
</code></pre>
<ul>
<li>Do not use line continuations (that is, ending a line inside a string literal with a backslash) in either ordinary or template string literals. Even though ES5 allows this, it can lead to tricky errors if any trailing whitespace comes after the slash, and is less obvious to readers.</li>
</ul>
<pre><code class="language-javascript">// Incorrect
const longString = 'This is a very long string that \
    far exceeds the 80-column limit. It unfortunately \
    contains long stretches of spaces due to how the \
    continued lines are indented.';

// Correct
const longString = 'This is a very long string that ' +
    'far exceeds the 80-column limit. It does not ' +
    'contain long stretches of spaces since the ' +
    'continued lines are indented.';
</code></pre>
<h3 id="functions"><strong>Functions</strong></h3>
<ul>
<li><code>Parameter name</code> comments should be used whenever the value and method name do not sufficiently convey the meaning, and refactoring the method to be clearer is infeasible. Preferred format: 1) before the value, 2) includes <code>=</code> sign:</li>
</ul>
<pre><code class="language-javascript">someFunction(obviousParam, /* shouldRender= */ true, /* name= */ 'hello');
</code></pre>
<ul>
<li>Functions may contain nested function definitions. If it is useful to give the function a name, it should be assigned to a local constant</li>
<li>Arrow functions provide a concise function syntax and simplify scoping <code>this</code> for nested functions. Prefer arrow functions over the function keyword, particularly for nested functions</li>
</ul>
<pre><code class="language-javascript">/**
 * Arrow functions can be documented just like normal functions.
 * @param {number} numParam A number to add.
 * @param {string} strParam Another number to add that happens to be a string.
 * @return {number} The sum of the two parameters.
 */
const moduleLocalFunc = (numParam, strParam) =&gt; numParam + Number(strParam);
</code></pre>
<ul>
<li>Default parameters are supported but discouraged</li>
<li>Optional parameters are permitted using the <code>=</code> operator in the parameter list. Optional parameters must include spaces on both sides of the<code>=</code> operator, be named exactly like required parameters (i.e., not prefixed withÂ <code>opt_</code>), use theÂ <code>= suffix</code>Â in their JSDoc type, come after required parameters, and not use initializers that produce observable side effects. All optional parameters for concrete functions must have default values, even if that value is undefined. In contrast to concrete functions, abstract and interface methods must omit default parameter values.</li>
</ul>
<h3 id="classes"><strong>Classes</strong></h3>
<ul>
<li>Type names are typically nouns or noun phrases. For example,Â <code>Request</code>,Â <code>ImmutableList</code>, orÂ <code>VisibilityMode</code></li>
<li>Interface names may sometimes be adjectives or adjective phrases instead (for example,Â <code>Readable</code>)</li>
<li>Method names are typically verbs or verb phrases. For example,Â <code>sendMessage</code>Â orÂ <code>stop</code>_</li>
<li>Getter and setter methods for properties are never required, but if they are used they should be namedÂ <code>getFoo</code>,Â <code>isFoo</code>Â orÂ <code>hasFoo</code>Â for booleans</li>
<li>Constructor, static and prototype methods, and properties must be documented with the <code>@constructor</code>, <code>@static</code>, <code>@method</code>, and <code>@type</code> annotations respectively.</li>
<li>Constructors are required for all ES6 classes. The constructor may be omitted only if the class is a mixin or a base class.</li>
<li>Set all of a concrete objectâ€™s fields (i.e. all properties other than methods) in the constructor. Otherwise, VMsâ€™ ability to optimize is constrained.</li>
</ul>
<pre><code class="language-javascript">class Foo {
  constructor() {
    /** @private @const {!Bar} */
    this.bar_ = computeBar();

    /** @protected @const {!Baz} */
    this.baz = computeBaz();
  }
}
</code></pre>
<ul>
<li>Where it does not interfere with readability, prefer module-local functions over private static methods</li>
<li>Do not use JavaScript <code>get</code> and <code>set</code> class properties. They are potentially surprising and difficult to reason about, and have limited support in the compiler. Provide ordinary methods instead.</li>
</ul>
<pre><code class="language-javascript">// Incorrect
class C {
  get foo() {
    return this.foo_;
  }
  set foo(val) {
    this.foo_ = val;
  }
}

// Correct
class C {
  getFoo() {
    return this.foo_;
  }
  setFoo(val) {
    this.foo_ = val;
  }
}
</code></pre>
<h2 id="jsdoc"><strong>JSDoc</strong></h2>
<ul>
<li>JSDoc is used on all classes, fields, and methods.</li>
</ul>
<pre><code class="language-javascript">/**
 * Multiple lines of JSDoc text are written here,
 * wrapped normally.
 * @param {number} arg A number to do something to.
 */
function doSomething(arg) { }
</code></pre>
<p>or, a one-liner:</p>
<pre><code class="language-javascript">/** @const @private {!Foo} A short bit of JSDoc. */
this.foo_ = foo;
</code></pre>
<p>JSDoc type annotations are encouraged for all variables and return values, and required for all parameters.</p>
<pre><code class="language-javascript">/** @type {number} */
const foo = 1;

const /** number */ foo = 1;

const /** !Array&lt;number&gt; */ data = [];

/**
 * Some description.
 * @type {!Array&lt;number&gt;}
 */
const data = [];
</code></pre>
<ul>
<li>JSDoc type support Markdown syntax. Use it to add links, emphasis, and other formatting to your comments.</li>
<li>Classes, interfaces and records must be documented with a description and any template parameters, implemented interfaces, visibility, or other appropriate tags</li>
<li>The class description should provide the reader with enough information to know how and when to use the class, as well as any additional considerations necessary to correctly use the class</li>
<li>Textual descriptions may be omitted on the constructor. @constructor and @extends annotations are not used with the class keyword unless the class is being used to declare an <code>@interface</code> or it extends a generic class.</li>
</ul>
<pre><code class="language-javascript">/**
 * A fancier event target that does cool things.
 * @implements {Iterable&lt;string&gt;}
 */
class MyFancyTarget extends EventTarget {
  /**
   * @param {string} arg1 An argument that makes this more interesting.
   * @param {!Array&lt;number&gt;} arg2 List of numbers to be processed.
   */
  constructor(arg1, arg2) {
    // ...
  }
};

/**
 * Records are also helpful.
 * @extends {Iterator&lt;TYPE&gt;}
 * @record
 * @template TYPE
 */
class Listable {
  /** @return {TYPE} The next item in line to be returned. */
  next() {}
}
</code></pre>
<ul>
<li>All enums and typedefs must be documented with appropriate JSDoc tags (<code>@typedef</code> or <code>@enum</code>) on the preceding line</li>
<li>Public enums and typedefs must also have a description</li>
<li>Individual enum items may be documented with a JSDoc comment on the preceding line</li>
</ul>
<pre><code class="language-javascript">/**
 * A useful type union, which is reused often.
 * @typedef {!Bandersnatch|!BandersnatchType}
 */
let CoolUnionType;


/**
 * Types of bandersnatches.
 * @enum {string}
 */
const BandersnatchType = {
  /** This kind is really frumious. */
  FRUMIOUS: 'frumious',
  /** The less-frumious kind. */
  MANXOME: 'manxome',
};
</code></pre>
<ul>
<li>In methods and named functions, parameter and return types must be documented, except in the case of same-signature</li>
<li>Return type may be omitted if the function has no non-empty return statements</li>
<li>Method, parameter, and return descriptions (but not types) may be omitted if they are obvious</li>
<li>If a method overrides a super class method, it must include an <code>@override</code> annotation</li>
</ul>
<pre><code class="language-javascript">/** A class that does something. */
class SomeClass extends SomeBaseClass {
  /**
   * Operates on an instance of MyClass and returns something.
   * @param {!MyClass} obj An object that for some reason needs detailed
   *     explanation that spans multiple lines.
   * @param {!OtherClass} obviousOtherClass
   * @return {boolean} Whether something occurred.
   */
  someMethod(obj, obviousOtherClass) {  }

  /** @override */
  overriddenMethod(param) {  }
}

/**
 * Demonstrates how top-level functions follow the same rules.  This one
 * makes an array.
 * @param {TYPE} arg
 * @return {!Array&lt;TYPE&gt;}
 * @template TYPE
 */
function makeArray(arg) {  }
</code></pre>
<ul>
<li>Always specify template parameters. This way, the compiler can do a better job, and it makes it easier for readers to understand what code does.</li>
</ul>
<pre><code class="language-javascript">// Incorrect
const /** !Object */ users = {};
const /** !Array */ books = [];
const /** !Promise */ response = null;

// Correct
const /** !Object&lt;string, !User&gt; */ users = {};
const /** !Array&lt;!Book&gt; */ books = [];
const /** !Promise&lt;!Response&gt; */ response = null;
</code></pre>
<h1 id="status">Status</h1>
<p>Accepted.</p>
<h1 id="consequences">Consequences</h1>
<p>Hopefully, better JavaScript code.</p>
    <nav id="page-controls">
      <a href="#content" id="return-top">
        <i class="fa fa-arrow-up" alt="â‡§"></i> Return to top
      </a>
    </nav>
  </main>
  </content>
  <footer id="footer">
    

<p>Compiled from markdown using <a href="https://www.mkdocs.org/">MkDocs</a>. Theme is <a href="https://teparsons.github.io/mkdocs-landing/">Landing</a> by <a href="https://toddparsons.co.uk">Todd Parsons</a>.</p>














<script src="../../search/main.js"></script>

  </footer>
</body>

</html>